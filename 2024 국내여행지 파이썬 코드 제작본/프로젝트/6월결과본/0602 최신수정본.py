import requests
import random

# ì´ˆê¸° ì§€ì—­ ì½”ë“œ ë°ì´í„° (ì‹œ/ë„ ë‹¨ìœ„)
base_region_codes = {
    "11": "ì„œìš¸íŠ¹ë³„ì‹œ",
    "26": "ë¶€ì‚°ê´‘ì—­ì‹œ",
    "27": "ëŒ€êµ¬ê´‘ì—­ì‹œ",
    "28": "ì¸ì²œê´‘ì—­ì‹œ",
    "29": "ê´‘ì£¼ê´‘ì—­ì‹œ",
    "30": "ëŒ€ì „ê´‘ì—­ì‹œ",
    "31": "ìš¸ì‚°ê´‘ì—­ì‹œ",
    "36": "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ",
    "41": "ê²½ê¸°ë„",
    "42": "ê°•ì›ë„",
    "43": "ì¶©ì²­ë¶ë„",
    "44": "ì¶©ì²­ë‚¨ë„",
    "45": "ì „ë¼ë¶ë„",
    "46": "ì „ë¼ë‚¨ë„",
    "47": "ê²½ìƒë¶ë„",
    "48": "ê²½ìƒë‚¨ë„",
    "50": "ì œì£¼íŠ¹ë³„ìì¹˜ë„"
}

tourist_spots = {
    # ì„œìš¸íŠ¹ë³„ì‹œ í•˜ìœ„ ì§€ì—­
    "1111000000": ["ê²½ë³µê¶", "ì²­ì™€ëŒ€"],
    "1114000000": ["ë‚¨ì‚°íƒ€ì›Œ", "ëª…ë™"],
    "1117000000": ["í™ëŒ€", "í•©ì •ì—­"],
    
    # ë¶€ì‚°ê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "2614000000": ["ì†¡ë„í•´ìˆ˜ìš•ì¥", "ì†¡ë„ êµ¬ë¦„ì‚°ì±…ë¡œ"],
    "2617000000": ["ë¶€ì” ì§„ì‹œì¥", "ë¶€ì‚° ììœ ë„ë§¤ì‹œì¥"],
    "2620000000": ["êµ­ë¦½í•´ì–‘ë°•ë¬¼ê´€", "í°ì—¬ìš¸ë¬¸í™”ë§ˆì„"],
    "2623000000": ["ë¶€ì‚°ì–´ë¦°ì´ëŒ€ê³µì›", "ì„ ì•”ì‚¬"],
    "2638000000": ["ë¶€ì‚°í˜„ëŒ€ë¯¸ìˆ ê´€", "ë‹¤ëŒ€í¬ ê¿ˆì˜ ë‚™ì¡°ë¶„ìˆ˜"],
    "2644000000": ["ë§¥ë„ìƒíƒœê³µì›", "ì‹ í˜¸ê³µì›"],
    "2650000000": ["F1963", "ê´‘ì•ˆë¦¬í•´ìˆ˜ìš•ì¥"],
    "2671000000": ["ì•„í™‰ì‚°ìˆ²", "êµ­ë¦½ë¶€ì‚°ê³¼í•™ê´€"],
    
    # ëŒ€êµ¬ê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "2711000000": ["ëŒ€êµ¬ì•½ë ¹ì‹œ", "ëŒ€êµ¬ê·¼ëŒ€ê³¨ëª©"],
    "2714000000": ["ë™í™”ì‚¬", "íŒ”ê³µì‚°"],
    "2717000000": ["ìˆ˜ì„±ëª»", "ìˆ˜ì„±ì•ŒíŒŒì‹œí‹°"],
    "2720000000": ["ì•ì‚°ê³µì›", "ëŒ€êµ¬ìŠ¤íƒ€ë””ì›€"],
    "2723000000": ["ì´ì›”ë“œ", "ë‘ë¥˜ê³µì›"],
    "2771000000": ["ëŒ€êµ¬ì‚¼ì„±ë¼ì´ì˜¨ì¦ˆíŒŒí¬", "ëŒ€êµ¬ê³¼í•™ê´€"],
    
    # ì¸ì²œê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "2817000000": ["ì¸ì²œëŒ€êµ", "ì„ì™•ë¦¬í•´ìˆ˜ìš•ì¥"],
    "2818500000": ["ì°¨ì´ë‚˜íƒ€ìš´", "ììœ ê³µì›"],
    
    # ê´‘ì£¼ê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "2917000000": ["ë¬´ë“±ì‚°", "êµ­ë¦½ê´‘ì£¼ë°•ë¬¼ê´€"],
    "2920000000": ["ê´‘ì£¼ê´‘ì—­ì‹œë¦½ë¯¸ìˆ ê´€", "518ë¯¼ì£¼ë¬˜ì§€"],
    "2953000000": ["ì–‘ë¦¼ë™ ì—­ì‚¬ë¬¸í™”ë§ˆì„", "ê´‘ì£¼ì˜ˆìˆ ì˜ê±°ë¦¬"],
    
    # ëŒ€ì „ê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "3017000000": ["ì—‘ìŠ¤í¬ê³¼í•™ê³µì›", "ëŒ€ì „ì˜¤ì›”ë“œ"],
    "3020000000": ["ìœ ì„±ì˜¨ì²œ", "ê³„ì¡±ì‚°"],
    "3023000000": ["ëŒ€ì²­í˜¸", "ë³´ë¬¸ì‚°"],
    
    # ìš¸ì‚°ê´‘ì—­ì‹œ í•˜ìœ„ ì§€ì—­
    "3117000000": ["ê°„ì ˆê³¶", "ëŒ€ì™•ì•”ê³µì›"],
    "3120000000": ["íƒœí™”ê°•êµ­ê°€ì •ì›", "ìš¸ì‚°ëŒ€ê³µì›"],
    "3171000000": ["ìš¸ì‚°ë°”ìœ„", "ì‹ ë¶ˆì‚°"],
    
    # ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ í•˜ìœ„ ì§€ì—­
    "3611000000": ["ì„¸ì¢…í˜¸ìˆ˜ê³µì›", "êµ­ë¦½ì„¸ì¢…ë„ì„œê´€"],
    
    # ê²½ê¸°ë„ í•˜ìœ„ ì§€ì—­
    "4146100000": ["í˜¸ì•”ë¯¸ìˆ ê´€", "ì—ë²„ëœë“œ"],
    "4148000000": ["í—¤ì´ë¦¬ ì˜ˆìˆ ë§ˆì„", "í¼ìŠ¤íŠ¸ê°€ë“ "],
    "4150000000": ["ì„¤ë´‰ê³µì›", "ë•í‰ê³µë£¡ìˆ˜ëª©ì›"],
    "4161000000": ["í™”ë‹´ìˆ²", "íŒ”ë‹¹ë¬¼ì•ˆê°œê³µì›"],
    "4165000000": ["í¬ì²œ ì‚°ì •í˜¸ìˆ˜", "êµ­ë¦½ìˆ˜ëª©ì›(ê´‘ë¦‰ìˆ²)"],
    "4180000000": ["ì¬ì¸í­í¬ (í•œíƒ„ê°• ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ì§€ì§ˆê³µì›)", "ì—°ì²œ í˜¸ë¡œê³ ë£¨"],
    "4182000000": ["ì˜ë””í”„ë‘ìŠ¤", "ìë¼ì„¬"],
    
    # ê°•ì›ë„ í•˜ìœ„ ì§€ì—­
    "4211000000": ["ë‚¨ì´ì„¬", "ê°•ì´Œë ˆì¼íŒŒí¬"],
    "4213000000": ["ì„¤ì•…ì‚°", "ì†ì´ˆí•´ìˆ˜ìš•ì¥"],
    "4215000000": ["ì •ë™ì§„", "ê°•ë¦‰ì»¤í”¼ê±°ë¦¬"],
    "4217000000": ["ì–‘ì–‘ì„œí”¼ë¹„ì¹˜", "ë‚™ì‚°ì‚¬"],
    "4219000000": ["í‰ì°½ì•Œíœì‹œì•„", "ëŒ€ê´€ë ¹ìŠ¤í‚¤ì¥"],
    "4221000000": ["ì² ì›DMZ", "ê³ ì„ì •"],
    "4223000000": ["í™”ì²œì‚°ë‚˜ë¬¼ì¶•ì œ", "íŒŒë¡œí˜¸"],
    
    # ì¶©ì²­ë¶ë„ í•˜ìœ„ ì§€ì—­
    "4311000000": ["ì²­ì£¼ìƒë‹¹ì‚°ì„±", "ì²­ì£¼ê³µì˜ˆë¹„ì—”ë‚ ë ˆ"],
    "4313000000": ["ìˆ˜ì•ˆë³´ì˜¨ì²œ", "ì¶©ì£¼í˜¸"],
    "4315000000": ["ë‹¨ì–‘íŒ”ê²½", "ë„ë‹´ì‚¼ë´‰"],
    "4372000000": ["ë³´ì€ì†ë¦¬ì‚°", "ë²•ì£¼ì‚¬"],
    "4374000000": ["ì˜¥ì²œë ˆì¼ë°”ì´í¬", "ì´í™”ì‚¬"],
    
    # ì¶©ì²­ë‚¨ë„ í•˜ìœ„ ì§€ì—­
    "4413000000": ["ì•„ì‚°ìŠ¤íŒŒë¹„ìŠ¤", "ì˜¨ì–‘ì˜¨ì²œ"],
    "4415000000": ["ê³µì£¼ê³µì‚°ì„±", "ë¬´ë ¹ì™•ë¦‰"],
    "4418000000": ["ë¶€ì—¬ë‚™í™”ì•”", "ë°±ì œë¬¸í™”ë‹¨ì§€"],
    "4420000000": ["ì„œì‚°í•´ë¯¸ìì„±", "ê°„ì›”ì•”"],
    "4421000000": ["íƒœì•ˆì•ˆë©´ë„", "ê½ƒì§€í•´ë³€"],
    "4471000000": ["ì˜ˆì‚°ìˆ˜ë•ì‚¬", "ì‚½êµì²œ"],
    
    # ì „ë¼ë¶ë„ í•˜ìœ„ ì§€ì—­
    "4511000000": ["ì „ì£¼í•œì˜¥ë§ˆì„", "ê²½ê¸°ì „"],
    "4513000000": ["êµ°ì‚°ê·¼ëŒ€ì—­ì‚¬ë°•ë¬¼ê´€", "êµ°ì‚°ì² ìƒˆë„ë˜ì§€"],
    "4514000000": ["ìµì‚°ë¯¸ë¥µì‚¬ì§€", "ìµì‚°íƒ€ì›Œ"],
    "4518000000": ["ì •ìë‚´ì¥ì‚°", "ë‚´ì¥ì‚°êµ­ë¦½ê³µì›"],
    "4519000000": ["ë‚¨ì›ê´‘í•œë£¨ì›", "ì§€ë¦¬ì‚°"],
    "4571000000": ["ìˆœì°½ì¥ë¥˜ë°•ë¬¼ê´€", "ìˆœì°½ë©”ë°€ê½ƒì¶•ì œ"],
    
    # ì „ë¼ë‚¨ë„ í•˜ìœ„ ì§€ì—­
    "4611000000": ["ëª©í¬í•´ìƒì¼€ì´ë¸”ì¹´", "ëª©í¬ê·¼ëŒ€ì—­ì‚¬ê´€"],
    "4613000000": ["ì—¬ìˆ˜ì—‘ìŠ¤í¬", "ì˜¤ë™ë„"],
    "4615000000": ["ìˆœì²œë§ŒìŠµì§€", "ìˆœì²œë“œë¼ë§ˆì´¬ì˜ì¥"],
    "4617000000": ["ë³´ì„±ë…¹ì°¨ë°­", "ëŒ€í•œë‹¤ì›"],
    "4623000000": ["í•´ë‚¨ëŒ€ë‘”ì‚°", "ì½”ìŠ¤ëª¨ìŠ¤ê³µì›"],
    "4671000000": ["ë‹´ì–‘ë©”íƒ€ì„¸ì¿¼ì´ì•„ê¸¸", "ë‹´ì–‘ëŒ€ë‚˜ë¬´ë°­"],
    "4672000000": ["í™”ìˆœì„¸ëŸ‰ì œ", "í™”ìˆœìŠ¤íŒŒëœë“œ"],
    
    # ê²½ìƒë¶ë„ í•˜ìœ„ ì§€ì—­
    "4711000000": ["ê²½ì£¼ë¶ˆêµ­ì‚¬", "ê²½ì£¼ì›”ì •êµ"],
    "4713000000": ["í¬í•­í˜¸ë¯¸ê³¶", "ì˜ì¼ëŒ€í•´ìˆ˜ìš•ì¥"],
    "4715000000": ["ê¹€ì²œì§ì§€ì‚¬", "ê¹€ì²œí”„ë¡œë°©ìŠ¤ë§ˆì„"],
    "4717000000": ["ì•ˆë™í•˜íšŒë§ˆì„", "ë´‰ì •ì‚¬"],
    "4719000000": ["êµ¬ë¯¸ê¸ˆì˜¤ì‚°", "ì¸ë™ë„ì¥ê¸¸"],
    "4721000000": ["ì˜ì£¼ë¶€ì„ì‚¬", "ì†Œë°±ì‚°"],
    "4723000000": ["ë¬¸ê²½ìƒˆì¬", "ë¬¸ê²½ì„íƒ„ë°•ë¬¼ê´€"],
    "4725000000": ["ì˜ˆì²œì½˜ë„ë¯¸ë‹ˆì—„", "ì˜ˆì²œê¸ˆë‹¹ì‹¤ì†”ë°­"],
    "4728000000": ["ì²­ë„ìš´ë¬¸ì‚¬", "ì²­ë„ë°˜ì‹œì¶•ì œ"],
    
    # ê²½ìƒë‚¨ë„ í•˜ìœ„ ì§€ì—­
    "4812000000": ["ì°½ì›ë§ˆì‚°í•©í¬êµ¬", "ì§„í•´êµ°í•­ì œ"],
    "4817000000": ["ì§„ì£¼ì„±", "ì§„ì£¼ë‚¨ê°•ìœ ë“±ì¶•ì œ"],
    "4822000000": ["í†µì˜ì‚°ë¦¼ë¬¸í™”ìˆ˜ë ¨ì›", "í†µì˜í•œì‚°ë„"],
    "4824000000": ["ì‚¬ì²œë°”ë‹¤ì¼€ì´ë¸”ì¹´", "ì‚¬ì²œê³µë£¡ë°•ë¬¼ê´€"],
    "4825000000": ["ê¹€í•´ê°€ì•¼í…Œë§ˆíŒŒí¬", "ê¹€í•´ìˆ˜ë¡œì™•ë¦‰"],
    "4827000000": ["ë°€ì–‘ì˜ë‚¨ë£¨", "ë°€ì–‘ì•„ë¦¬ë‘ë°•ë¬¼ê´€"],
    "4831000000": ["ê±°ì œë°”ëŒì˜ì–¸ë•", "ê±°ì œì™¸ë„ë³´íƒ€ë‹ˆì•„"],
    "4833000000": ["ë‚¨í•´ìƒì£¼í•´ìˆ˜ìš•ì¥", "ë‚¨í•´ë…ì¼ë§ˆì„"],
    "4872000000": ["í•¨ì–‘ìƒë¦¼ê³µì›", "í•¨ì–‘ë©”ë°€ê½ƒì¶•ì œ"],
    "4873000000": ["ê±°ì°½ì›”ì„±ê³„ê³¡", "ê±°ì°½ëŒ€ì„±ë™ê³„ê³¡"],
    
    # ì œì£¼íŠ¹ë³„ìì¹˜ë„ í•˜ìœ„ ì§€ì—­
    "5011000000": ["ì„±ì‚°ì¼ì¶œë´‰", "ì„­ì§€ì½”ì§€"],
    "5013000000": ["í•œë¼ì‚°", "í˜‘ì¬í•´ìˆ˜ìš•ì¥"]
}
def get_region_hierarchy(appkey, parent_code=None):
    """SK Open APIë¡œë¶€í„° ì§€ì—­ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤ (ì‹œ/ë„ ë° ì‹œêµ°êµ¬ ë‹¨ìœ„ë§Œ)."""
    base_url = "https://apis.openapi.sk.com/puzzle/travel/meta/districts"
    headers = {'Accept': 'application/json', 'appkey': appkey}
    
    try:
        # ìµœìƒìœ„ ì§€ì—­(ì‹œ,ë„)ì¸ ê²½ìš°
        if not parent_code:
            params = {'type': 'sig', 'offset': 0, 'limit': 100}
        # í•˜ìœ„ì§€ì—­ ì¡°íšŒì¸ ê²½ìš°
        else:
            params = {'type': 'sig', 'offset': 0, 'limit': 100}
        
        response = requests.get(base_url, headers=headers, params=params)
        response.raise_for_status()
        data = response.json()
        
        if data.get('status', {}).get('code') == '00':
            contents = data.get('contents', [])
            if parent_code:
                return [item for item in contents if str(item.get('districtCode', '')).startswith(str(parent_code))]
            return contents
        return []
    except (requests.exceptions.RequestException, ValueError, KeyError) as e:
        print(f"âš ï¸ ì§€ì—­ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ì…ë‹ˆë‹¤: {str(e)}")
        return []

def get_tourist_spots(region_code):
    """ ê´€ê´‘ì§€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤."""
    return [{"name": spot, "description": f"{spot} ê´€ê´‘ì§€"} 
            for spot in tourist_spots.get(region_code, [])]

def display_region_info(region_code, region_name, spots):
    """ì§€ì—­ ì •ë³´ì™€ ê´€ê´‘ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤."""
    print("\n" + "=" * 50)
    print(f" [{region_name}] ì§€ì—­ ì •ë³´ ")
    print("=" * 50)
    
    if spots:
        print("\n ëŒ€í‘œ ê´€ê´‘ì§€:")
        for i, spot in enumerate(spots, 1):  # ê´€ê´‘ì§€ ì¶œë ¥ 
            name = spot.get('name', 'ì´ë¦„ ì—†ìŒ')
            desc = spot.get('description', 'ì„¤ëª… ì—†ìŒ')
            print(f"{i}. {name}")
            print(f"   - {desc}")
    else:
        print("\nâš ï¸ ì´ ì§€ì—­ì˜ ê´€ê´‘ì§€ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.")

def display_subregions_with_spots(regions, parent_name):
    """í•˜ìœ„ ì§€ì—­ ëª©ë¡ê³¼ ê´€ê´‘ì§€ë¥¼ í•¨ê»˜ í‘œì‹œí•©ë‹ˆë‹¤."""
    print("\n" + "=" * 50)
    print(f" [{parent_name}] í•˜ìœ„ ì§€ì—­ ëª©ë¡ ")
    print("=" * 50)
    
    for region in regions:
        region_code = region.get('districtCode', '')
        region_name = region.get('districtName', 'ì´ë¦„ ì—†ìŒ')
        
        # ê´€ê´‘ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸° 
        spots = get_tourist_spots(region_code)
        
        print(f"\nğŸ“ {region_code}: {region_name}")
        if spots:
            print("    ëŒ€í‘œ ê´€ê´‘ì§€:")
            for spot in spots:  # ëª¨ë“  ê´€ê´‘ì§€ ì¶œë ¥ 
                print(f"      - {spot.get('name', 'ì´ë¦„ ì—†ìŒ')}")
        else:
            print("   âš   ê´€ê´‘ì§€ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤")

def validate_region_code(region_code, regions):
    """ì…ë ¥ëœ ì§€ì—­ ì½”ë“œê°€ ìœ íš¨í•œì§€ í™•ì¸í•©ë‹ˆë‹¤."""
    if not region_code:
        return False
    
    # ìµœìƒìœ„ ì§€ì—­ ì½”ë“œ í™•ì¸
    if len(region_code) == 2 and region_code in base_region_codes:
        return True
    
    # í•˜ìœ„ ì§€ì—­ ì½”ë“œ í™•ì¸
    for region in regions:
        if region.get('districtCode') == region_code:
            return True
    
    return False

def main():
    print(" êµ­ë‚´ ì—¬í–‰ì§€ ì¶”ì²œ í”„ë¡œê·¸ë¨ ")
    print("=" * 50)
    
    # 1. appKey ì…ë ¥
    appkey = input("ë°œê¸‰ ë°›ì€ appKeyë¥¼ ì…ë ¥í•˜ì„¸ìš”: ").strip()
    if not appkey:
        print("appKeyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        return
    
    # 2. ì§€ì—­ ì½”ë“œ ê³„ì¸µì  íƒìƒ‰
    current_code = None
    regions = []
    region_stack = []  # ì´ì „ ë‹¨ê³„ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìŠ¤íƒ
    
    while True:
        if not current_code:
            # ìµœìƒìœ„ ì§€ì—­ ì„ íƒ
            print("\n[ì‹œ/ë„ ëª©ë¡]")
            for code, name in base_region_codes.items():
                print(f"{code}: {name}")
            
            region_code = input("\nì¶”ì²œë°›ì„ ì§€ì—­ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (2ìë¦¬ ì‹œ/ë„ ì½”ë“œ, ì¢…ë£Œ: q): ").strip()
            
            if region_code.lower() == 'q':
                return
            if region_code not in base_region_codes:
                print("âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ ì½”ë“œì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                continue
            
            regions = get_region_hierarchy(appkey, region_code)
            if not regions:
                print("âš ï¸ í•´ë‹¹ ì§€ì—­ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
                continue
            
            current_code = region_code
            region_name = base_region_codes[region_code]
            
            # í•˜ìœ„ ì§€ì—­ê³¼ ê´€ê´‘ì§€ í•¨ê»˜ ì¶œë ¥
            display_subregions_with_spots(regions, region_name)
            
            # í˜„ì¬ ìƒíƒœ ì €ì¥ (ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸° ìœ„í•´)
            region_stack.append((current_code, regions))
        else:
            # í•˜ìœ„ ì§€ì—­ ëª©ë¡ í‘œì‹œ
            print(f"\n[{base_region_codes.get(current_code[:2], '')} í•˜ìœ„ ì§€ì—­ ëª©ë¡]")
            print("~: ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸°")
            print("q: í”„ë¡œê·¸ë¨ ì¢…ë£Œ")
            
            for region in regions:
                print(f"{region.get('districtCode', '')}: {region.get('districtName', '')}")
            
            user_input = input("\nìƒì„¸ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì „ì²´ ì½”ë“œ ì…ë ¥ ë˜ëŠ” Enterë¡œ ì„ íƒ ì™„ë£Œ): ").strip()
            
            if user_input.lower() == 'q':
                return
            elif user_input == '~':
                if region_stack:
                    current_code, regions = region_stack.pop()
                    continue
                else:
                    print("âš ï¸ ë” ì´ìƒ ì´ì „ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
                    continue
            elif not user_input:
                break
                
            # ìœ íš¨í•˜ì§€ ì•Šì„ ê²½ìš°
            if not validate_region_code(user_input, regions):
                print("âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ ì½”ë“œì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                continue
                
            # ê´€ê´‘ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (í•˜ìœ„ ì§€ì—­ì€ ë” ì´ìƒ íƒìƒ‰í•˜ì§€ ì•ŠìŒ)
            region_name = next((r.get('districtName') for r in regions if r.get('districtCode') == user_input), "ì•Œ ìˆ˜ ì—†ëŠ” ì§€ì—­")
            spots = get_tourist_spots(user_input)
            display_region_info(user_input, region_name, spots)
            
            # í˜„ì¬ ìƒíƒœ ì €ì¥ 
            region_stack.append((current_code, regions))
            current_code = user_input
    
    # 3. ìµœì¢… ì„ íƒëœ ì§€ì—­ì˜ í•˜ìœ„ ì§€ì—­ ëª©ë¡
    destinations = []
    for region in regions:
        code = region.get('districtCode', '')
        name = region.get('districtName', 'ì´ë¦„ ì—†ìŒ')
        destinations.append(f"{code}: {name}")
    
    if not destinations:
        print("âš ï¸ ì¶”ì²œí•  ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.")
        return
    
    # 4. ê²°ê³¼ ì¶œë ¥
    print("\n" + "=" * 50)
    parent_name = base_region_codes.get(current_code[:2], 'ì•Œ ìˆ˜ ì—†ëŠ” ì§€ì—­')
    print(f" [{parent_name}] ì§€ì—­ ëª©ë¡ ")
    print("=" * 50)
    
    # ëª¨ë“  ì§€ì—­ ì¶œë ¥ 
    for dest in destinations:
        print(dest)
    
    # 5. ì„ íƒëœ ì§€ì—­ ëª©ë¡ ì¤‘ ë¬´ì‘ìœ„ ì¶”ì²œ 
    if destinations:
        print("\n" + "=" * 50)
        random_dest = random.choice(destinations)
        print(f"ğŸ² ë¬´ì‘ìœ„ ì¶”ì²œ ì§€ì—­: {random_dest}")
            
if __name__ == "__main__":
    main()
